00002 Aug21'20-01:21:52 Harry 10.5
TOPIC: ~control 0x19 224465431 2 0 1311 simplecontrol.top
" all " 00! u: ( =8%input<%userfirstline ) ^gambit ( ~introductions ) `0gy u: ( ) $$currenttopic = %topic ^if 00m( %response == 0 ) 00I{ ^nofail ( TOPIC ^rejoinder ( ) ) } 004 ^if 00D( %length == 0 and %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 00V{ ^nofail ( TOPIC ^respond ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02r{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01S { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^respond ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00F( %outputrejoinder or %lastquestion ) 00q{ ^end ( TOPIC ) } 004 ^if 00R( %response == 0 and ^marked ( $$currenttopic ) ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02q{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01R { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02o{ @8 = ^gambittopics ( ) ^loop ( -1 ) 01Q { $$topic = ^pick ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00N{ ^repeat ( ) I don't know what to say. } 004 `000 
TOPIC: ~introductions 0x3 81328223 4 1 521 introductions.top
" all " ( $_url ) 00r t:  ^keep ( ) welcome `02r u: ( open ) ^if 01r( ^dbinit ( dbname = postgres host = 127.0.0.1 port = 5432 user = postgres password = postgres ) ) 00l{ db opened } 00B else ( 1 ) 00l { db failed } 004 `00y u: ( $$db_error ) $$db_error `03y u: ( ) $input = %originalinput ^keep ( ) ^repeat ( ) ^if 00k( $input != '' ) 02r{ $_url = ^"curl --silent -X POST 'https://visl.sdu.dk/cgi-bin/visl.pt.cgi' -d 'parser=roles&visual=cg-dep&symbol=cg&inputlang=pt&text=$input'" ^popen ( $_url '^visl ) } 004 `000 
